<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sample page, loading results from rethinkdb</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<!--<script src="script.js"></script>-->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.runtime.min.js"></script>
</head>
<body>

<div>
</div>


<div>
<script id="problem-list" type="text/x-handlebars-template">
{{problemList}}
</script>
</div>

<table id="problem-table">
<thead>
<tr>
<th>Description</th>
<th>Category</th>
<th>Tags</th>
<th>Affected</th>
<th>Location</th>
</tr>
</thead>
<tbody id="problem-text">
</tbody>
</table>

<div>
<script type="text/javascript">
var problems = $('#problem-list').text();
var decoded_problems = $("<div/>").html(problems).text();
var parsed_problems = $.parseJSON(decoded_problems);
$.each(parsed_problems, function(i, problem) {
    var $tr = $('<tr>').append(
        $('<td>').text(problem.ProblemDescription), 
        $('<td>').text(problem.ProblemCategory), 
        $('<td>').text(problem.Tags), 
        $('<td>').text(problem.AffectedNumber), 
        $('<td>').text(problem.GeographicLocation)
    );
    $('#problem-text').append($tr);
});
</script>
</div>


</body>
</html>
